DHCP（Dynamic Host Configure Protocol，动态主机配置协议）

动态主机配置协议是一个局域网的网络协议。指的是由服务器控制一段IP地址范围，客户机登录服务器时就可以自动获得服务器分配的IP地址和子网掩码。
担任DHCP服务器的计算机需要安装TCP/IP协议，并为其设置静态IP地址、子网掩码、默认网关等内容。

两台连接到互联网上的电脑相互之间通信，必须有各自的IP地址，由于IP地址资源有限，宽带接入运营商不能做到给每个报装宽带的用户都能分配一个固定的IP地址
（所谓固定IP就是即使在你不上网的时候，别人也不能用这个IP地址，这个资源一直被你所独占），所以要采用DHCP方式对上网的用户进行临时的地址分配。
也就是你的电脑连上网，DHCP服务器才从地址池里临时分配一个IP地址给你，每次上网分配的IP地址可能会不一样，这跟当时IP地址资源有关。
当下线的时候，DHCP服务器可能就会把这个地址分配给之后上线的其他电脑。这样就可以有效节约IP地址，既保证了网络通信，又提高IP地址的使用率。

它是TCP/IP协议簇中的一种，主要是用来给局域网客户机分配动态的IP地址。
缺点：DHCP存在较多的广播开销，对于用户量较多的城域网会造成网络运行效率下降和配置困难；
另一方面，仍然无法解决用户自行配置IP地址的问题。
公有ip地址的动态分配主要通过PPPoE

DHCP服务的好处：
减少管理员的工作量
避免输入错误的可能
避免IP冲突
提高了IP地址的利用率
方便客户端的配置

DHCP服务的分配方式：
自动分配：分配到一个IP地址后永久使用
手动分配：由DCHP服务器管理员专门指定IP地址
动态分配：使用完之后释放该IP，供其它客户机使用

DHCP是一个基于广播的协议，它的操作可以归结为四个阶段，这些阶段是IP租用请求、IP租用提供、IP租用选择、IP租用确认。
1、IP租用请求：在任何时候，客户计算机如果设置为自动获取IP地址，那么在它开机时，就会检查自己当前是否租用了一个IP地址，如果没有，
它就向DCHP请求一个租用，由于该客户计算机并不知道DHCP服务器的地址，所以会用255.255.255.255作为目标地址，
源地址使用0.0.0.0，在网络上广播一个DHCPDISCOVER消息，消息包含客户计算机的媒体访问控制（MAC）地址（网卡上内建的硬件地址）以及它的NetBIOS名字。

2、IP租用提供：当DHCP服务器接收到一个来自客户的IP租用请求时，它会根据自己的作用域地址池为该客户保留一个IP地址并且在网络上广播一个来实现，
该消息包含客户的MAC地址、服务器所能提供的IP地址、子网掩码、租用期限，以及提供该租用的DHCP服务器本身的IP地址。

3、IP租用选择：如果子网还存在其它DHCP服务器，那么客户机在接受了某个DHCP服务器的DHCPOFFER消息后，
它会广播一条包含提供租用的服务器的IP地址的DHCPREQUEST消息，在该子网中通告所有其它DHCP服务器它已经接受了一个地址的提供，
其他DHCP服务器在接收到这条消息后，就会撤销为该客户提供的租用。
然后把为该客户分配的租用地址返回到地址池中，该地址将可以重新作为一个有效地址提供给别的计算机使用。

4、IP租用确认： DHCP服务器接收到来自客户的DHCPREQUEST消息，它就开始配置过程的最后一个阶段，这个确认阶段由DHCP服务器发送一个DHCPACK包给客户，
该包包括一个租用期限和客户所请求的所有其它配置信息，至此，完成TCP/IP配置。

DHCP租约的过程（四个步骤）：
1.客户机请求IP（Discover）：以广播的形式由客户端发送DHCP请求IP地址
源IP地址：0.0.0.0
目标IP地址：255.255.255.255
2.服务器响应（Offer）：DHCP服务器响应客户端的广播
源IP地址：192.168.10.10
目标IP地址：255.255.255.255
提供IP地址：192.168.10.101
3.客户机选择IP（Request）：客户端广播选择DHCP服务器（例192.168.10.10）
源IP地址：0.0.0.0
目标IP地址：255.255.255.255
租约期限：8天
4.服务器确定租约（Ack）：服务器确认