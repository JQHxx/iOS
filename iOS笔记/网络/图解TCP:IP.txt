=========================================包与流:

应用层在发送数据的时候，都是站在一个个包的视角，将包一个个发送出去，形成一个 stream，
接收端收到 stream 之后，再按照具体的协议切割还原成发送方所发送的包。
发送方每一次调用 send()，并不会在接收方有一次对应的 receive() 回调，
有可能发送方 send() 10 次，每次 10 个字节，但是接受方只有一次 receive() 回调，
一次将 100 个字节抛给应用层。receive() 收到的数据只能看做是一个 stream，
所以，这里有一个包转换为流，然后流再还原成包的过程。
HTTP 实现了这一过程，但 TCP 本身并不负责这一过程，当我们基于 TCP 或者其他传输层协议实现自己的通讯协议的时候，
需要自己来处理这一转换过程。

三种办法来做包与流之间的转换
办法一：特殊切割符来分割包
这种办法粗暴简单，我们使用一个特殊字符来作为包与包之间的分隔符，不过这个分隔符要特殊，特殊到几乎不出现在包的内容当中，否则会影响接收方切割包的过程。
这种做法的缺陷也是显而易见的，必须严格要求包体中不会出现该特殊字符，所以这种办法只能应用于非常特殊的场景。
办法二：每个包都是固定长度
这种办法也是粗暴简单，甚至不需要分隔符，每次接收方从 stream 中取出固定长度的字节，还原成一个包，
代码也比较简单，在 receive() 回调里，每次检查是否达到了固定的长度，是则取出固定长度还原，否则继续等待
这种做法的缺陷就更大了，会造成包体的浪费，无法适应不同大小的包。

办法三：自定义协议，支持可变长度的包
当我们需要描述可变长度的包时，需要定义一个 header 来详细描述包相关的信息，比如最简单的，记录包的长度
接收方在收到 NSData 之后，可以先读取 4 个字节的长度信息，还原成 int 值，再读取 int 值所记录的字节数，这些字节就是我们的包了

=========================================图解TCP/IP
WAN （Wide Area Network） 广域网
MAN （Metropolitan Area Network） 城域网：连接整个城市的网络
LAN （Local Area Network） 局域网

ISO: 国际标准化组织 international organization for standards
OSI: Open Systems Interconnection 开放式通信系统互联参考模型

NIC：Network Interface Card 也叫网卡，使计算机连网时所使用的部件

分组交换：将大数据分割位一个个叫做包（packet）的较小单位进行传输的方法。

源主机
目标主机

表示层：主要负责数据格式的转换，将设备固有的数据格式转换为网络标准传输格式
会话层：负责建立和断开通信连接。对何时建立连接，何时发送数据等进行管理
网络层：将数据传输到目标地址，负责寻址和路由选择
传输层：保证数据传输的可靠性是传输层的重要作用
数据链路层：作用就是在这些通过传输介质互连的设备之间进行数据处理

相互直连的设备之间使用MAC地址（物理地址或硬件地址）实现传输
MAC, Media Access Control：介质访问控制

###会话层负责决定建立连接和断开连接的时机，而传输层进行实际的建立和断开处理###
###实际将数据传输给对端的处理是由网络层来完成的###

根据接收端数量分类：
单播：Unicast
广播：broadcast
将消息从1台主机发送给与之相连的所有其他主机
进行广播通信的计算机有他们的广播范围。只有在这个范围之内的计算机才能收到相应的广播消息。范围叫做广播域
多播：Multicast
与广播类似，也是将消息发给多个接受主机。不同在于它要限定某一组主机作为接收端。
任播：Aycast
指在特定的多台主机中选出一台作为接收端的一种通信方式。
任播通信从目标主机群中选择一台最符合网络条件的主机作为目标主机发送消息。
被选中的那台特定主机将返回一个单播信号，随后发送端主机会只和这台主机进行通信。

地址唯一性
地址层次性
MAC地址和IP地址在标识一个通信主体时虽然都具有唯一性，但是他们当中只有IP地址具有层次性

MAC地址由设备的制造厂商针对每块网卡分别指定。
可以通过制造商识别号、制造商内部产品编号以及产品通用编号确保MAC地址的唯一性。

IP地址实现分层：
IP地址由网络号和主机号两部分组成。
即使通信主机的IP地址不同，若主机号不同，网络号相同，说明他们处于同一网段。
通常处于同一网段的主机也都属于同一部分或集团组织。
网络号相同的主机在组织结构、提供商类型和地域分布上都比较集中，也为IP寻址带来了极大的方便。

MAC寻址参考地址转发表，IP寻址参考路由控制表
根据地址转发表和路由表定位报文发送的目标设备。
地址转发表和路由控制表不需要在网络中的各个节点上手动设置，而是由这些节点自动生成的。
地址转发表根据自学自动生成。
路由控制表根据路由协议自动生成。
实际地址转发表和路由控制表能获取的信息不是具体的目标地址，而是该数据应该被发送出去的网卡信息。

MAC地址转发表中所记录的是实际的MAC地址本身，而路由表中记录的IP地址则是集中了之后的网络号。